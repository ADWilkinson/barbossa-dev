services:
  barbossa:
    image: ghcr.io/adwilkinson/barbossa-dev:latest
    container_name: barbossa
    restart: unless-stopped
    volumes:
      # Config (required)
      - ./config:/app/config:ro
      # Persist logs and output
      - ./logs:/app/logs
      - ./changelogs:/app/changelogs
      - ./projects:/app/projects
      # Git config for commits
      - ~/.gitconfig:/home/barbossa/.gitconfig:ro
      # GitHub CLI auth (required)
      - ~/.config/gh:/home/barbossa/.config/gh:ro
      # Claude config (writable for token refresh)
      - ~/.claude:/home/barbossa/.claude
    environment:
      - TZ=${TZ:-UTC}
