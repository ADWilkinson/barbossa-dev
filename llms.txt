# Barbossa

> AI engineers that ship code while you sleep.

Barbossa is an autonomous development pipeline powered by Claude. Version 1.8.0.

## Two Modes

| Mode | What It Does |
|------|--------------|
| **Autonomous** (default) | AI implements code from backlog, reviews PRs, merges |
| **Spec Mode** | AI generates cross-repo feature specs, no code changes |

## Autonomous Mode - Five Agents

| Agent | Purpose | Frequency |
|-------|---------|-----------|
| **Engineer** | Picks tasks from backlog, creates PRs | 12x daily |
| **Tech Lead** | Reviews PRs (8-dimension quality), merges or requests changes | 12x daily |
| **Discovery** | Finds TODOs, missing tests, issues | 6x daily |
| **Product Manager** | Proposes high-value features | 3x daily |
| **Auditor** | System health checks | Daily |

**Pipeline:** Discovery/Product → GitHub Issues → Engineer → PR → Tech Lead → Merge

## Spec Mode - Product AI

When `spec_mode.enabled = true`, all autonomous agents are disabled. Only the Spec Generator runs.

| Agent | Purpose |
|-------|---------|
| **Spec Generator** | Creates cross-repo feature specs with distributed tickets |

**Use when:** You want detailed feature specifications spanning multiple repos instead of autonomous code changes.

**Output:** Parent spec ticket (in primary_repo) + child implementation tickets (in each affected repo).

**Two-Pass Quality:** Specs go through critique before ticket creation:
1. Pass 1: Generate raw specs from product context
2. Pass 2: Critique for precision - reject vague specs, refine unclear ones

## Requirements

- Docker
- GitHub token (`gh auth token`)
- Claude token (`claude setup-token`) OR Anthropic API key

## Quick Start

```bash
curl -fsSL https://raw.githubusercontent.com/ADWilkinson/barbossa-dev/main/install.sh | bash
cd barbossa && docker compose up -d
docker exec barbossa barbossa health
```

## Configuration

**Autonomous Mode (minimal):**
```json
{
  "owner": "your-username",
  "repositories": [{ "name": "my-app", "url": "https://github.com/you/my-app.git" }]
}
```

**Spec Mode:**
```json
{
  "owner": "your-username",
  "repositories": [
    { "name": "backend-api", "url": "..." },
    { "name": "frontend-web", "url": "..." }
  ],
  "products": [{
    "name": "my-platform",
    "repositories": ["backend-api", "frontend-web"],
    "primary_repo": "frontend-web",
    "context": {
      "vision": "Leading platform for X",
      "current_phase": "MVP hardening",
      "constraints": ["API < 200ms"],
      "strategy_notes": ["Users want faster onboarding"]
    }
  }],
  "settings": {
    "spec_mode": { "enabled": true }
  }
}
```

## Commands

```bash
docker exec barbossa barbossa health           # Check status
docker exec barbossa barbossa run engineer     # Run engineer now
docker exec barbossa barbossa run tech-lead    # Run tech lead now
docker exec barbossa barbossa run spec         # Run spec generator (spec mode)
docker exec barbossa barbossa status           # View activity
```

## Linear Integration (Optional)

```json
{
  "issue_tracker": {
    "type": "linear",
    "linear": { "team_key": "ENG", "backlog_state": "Backlog" }
  }
}
```

Set: `export LINEAR_API_KEY="lin_api_xxx"`

## Discord Notifications

```json
{
  "settings": {
    "notifications": {
      "enabled": true,
      "discord_webhook": "https://discord.com/api/webhooks/...",
      "notify_on": { "pr_created": true, "pr_merged": true, "error": true }
    }
  }
}
```

## Privacy

Anonymous telemetry (run counts, success rates). No code, repo names, or identifying info collected.

Opt out: `"settings": { "telemetry": false }`

## Links

- **Docs:** https://barbossa.dev
- **GitHub:** https://github.com/ADWilkinson/barbossa-dev
- **Issues:** https://github.com/ADWilkinson/barbossa-dev/issues

## Version

**Current:** 1.8.0 (2026-01-03)

- v1.8.0: Spec Mode with two-pass quality review
- v1.7.0: Discord webhook notifications
- v1.6.4: Repository focus and known_gaps config
- v1.3.0: Enhanced UI/UX review, external dependency detection
- v1.2.0: Product Manager and Auditor fixes
- v1.1.0: Engineer detects Tech Lead feedback properly
